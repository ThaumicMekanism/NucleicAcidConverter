<!DOCTYPE html>
<html>
  <head>
    <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> 
    <title>Nucleic Acid Converter</title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/normalize.css" rel="stylesheet">
    <link rel="stylesheet" href="css/button-checkbox_style.css">
    <link rel="stylesheet" href="css/inputbox.css">
    <!-- Alertify scripts and textures -->
	<script src="js/alertify.js"></script>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<link rel="stylesheet" href="css/alertify.css" />
	<link rel="stylesheet" href="css/themes/default.css" />
	<!-- ----------------------------- -->

	<!-- Bootstrap scripts and textures -->
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/bootstrap-switch.css" rel="stylesheet">
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap-switch.js"></script>

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <style>
        #custkeys { background: #444; position: relative; margin : auto; width: 50%;}
        .inputLetters {
           border: 2px solid #0a3c59;
           background: #2d4707;
           background: -webkit-gradient(linear, left top, left bottom, from(#4d7511), to(#2d4707));
           background: -webkit-linear-gradient(top, #4d7511, #2d4707);
           background: -moz-linear-gradient(top, #4d7511, #2d4707);
           background: -ms-linear-gradient(top, #4d7511, #2d4707);
           background: -o-linear-gradient(top, #4d7511, #2d4707);
           background-image: -ms-linear-gradient(top, #4d7511 0%, #2d4707 100%);
           padding: 4.5px 9px;
           -webkit-border-radius: 0px;
           -moz-border-radius: 0px;
           border-radius: 0px;
           -webkit-box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 0px 0;
           -moz-box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 0px 0;
           box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 0px 0;
           text-shadow: #32f00c 0 1px 0;
           color: #2910b3;
           font-size: 24px;
           /*font-family: helvetica, serif;*/
           font-family:Monospace;
           text-decoration: none;
           vertical-align: middle;
           }
        .inputLetters:hover {
           border: 2px solid #0a3c59;
           text-shadow: #1e4158 0 1px 0;
           background: #2d4707;
           background: -webkit-gradient(linear, left top, left bottom, from(#4d7511), to(#2d4707));
           background: -webkit-linear-gradient(top, #4d7511, #2d4707);
           background: -moz-linear-gradient(top, #4d7511, #2d4707);
           background: -ms-linear-gradient(top, #4d7511, #2d4707);
           background: -o-linear-gradient(top, #4d7511, #2d4707);
           background-image: -ms-linear-gradient(top, #4d7511 0%, #2d4707 100%);
           color: #aedb1b;
           }
        .inputLetters:active {
           text-shadow: #1e4158 0 1px 0;
           border: 2px solid #0a3c59;
           background: #4d7511;
           background: -webkit-gradient(linear, left top, left bottom, from(#2d4707), to(#2d4707));
           background: -webkit-linear-gradient(top, #2d4707, #4d7511);
           background: -moz-linear-gradient(top, #2d4707, #4d7511);
           background: -ms-linear-gradient(top, #2d4707, #4d7511);
           background: -o-lin
        </style>
  </head>

  <body ng-app="starter">
	<div id="loading">
		<div id='loadingdiv'></div><h2 id='loadingtxt'>Loading...</h2><p id='slowclosetxt' style='color:red;display:none;width:50%;'>This program's loading screen may not be responding!</p><input type="submit" value="Close" id="closeloading" style="display:none;" class="styled-button-reset" onclick='loadingscreen("hide");'></input>
	</div>
    <ion-nav-view></ion-nav-view>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/algorithm.js"></script>
    <script type="text/javascript" src="js/tmutilities.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
        /*var pressTimer

				$('resetrsf').mouseup(function(){
				  clearTimeout(pressTimer)
				  // Clear timeout
				  return false;
				}).mousedown(function(){
				  // Set timeout
				  alert('hi');
				  pressTimer = window.setTimeout(function() {alert('held');},1000);
				  
				  return false; 
				}).click(function(){ alert('his');return false; });*/
		var loadingtime=null;
		function loadingscreen(toggle){
			var ltint=5000;
			if(toggle=='show'){
				loadingscreen('hide');
				document.getElementById('loading').style.display='block';
				var loadingtime = setTimeout(lstimeout, ltint);
			}if(toggle=='hide'){
				document.getElementById('loading').style.display='none';
				document.getElementById('closeloading').style.display='none';
				document.getElementById('slowclosetxt').style.display='none';
				document.getElementById('loadingtxt').innerHTML='Loading...';
				clearTimeout(loadingtime);
			}if(toggle=='timeoutf'){
				document.getElementById('slowclosetxt').style.display='block';
				document.getElementById('closeloading').style.display='block';
			}if(toggle.substring(0,10)=='updatetxt='){
				document.getElementById('loadingtxt').innerHTML='Loading...'+toggle.substring(10);
				clearTimeout(loadingtime);
				var loadingtime = setTimeout(lstimeout, ltint);
			}
		}function lstimeout(){loadingscreen('timeoutf');}
		function cutDNA(){
		loadingscreen('show');
			if(document.getElementById("inputRSF").value!=''){
				
			
				document.getElementById("inputRSF").value=document.getElementById("inputRSF").value.toUpperCase();
				var info=restrictionSiteFinder(document.getElementById("inputRSF").value,'RE-','REa-','REb-');
				console.log(info);
				if(
				info['error']=='true'){
						alertify.error(info['message']).dismissOthers();
				}else{
					//document.getElementById('RSFiOutput').value=document.getElementById("inputRSF").value;
					//document.getElementById('RSFcOutput').value=info['cutDNA'];
					document.getElementById('RSFeOutput').innerHTML="Input Strand:<br><br>"+document.getElementById("inputRSF").value+"<br><br>Cut Strand:<br><br>"+info['cutDNA']+"<br><br>Active Restriction Sites; Number of Sites:<br><br>"+info['REstuff'];
				}
			}else{
				alertify.error('The input is empty! Please enter something in the input.');
			}
			var hide=setTimeout(function(){loadingscreen('hide')},1000);
		}
        
        function rsfFullReset(){
			loadingscreen('show');
            document.getElementById('inputRSF').value='';
            document.getElementById('RSFeOutput').innerHTML="";
            var i=1;
            while(i<10){
                document.getElementById('RE-'+i).checked=false;
                document.getElementById('REa-'+i).value=document.getElementById('REa-'+i).getAttribute('ovalue');
                document.getElementById('REb-'+i).value=document.getElementById('REb-'+i).getAttribute('ovalue');
                i++;
            }
			var hide=setTimeout(function(){loadingscreen('hide')},1000);
        }
		
		function togglekeyboard(){
        
         //$("#custkeys").hide(); 
         if($(this).attr("class") == "toggle"){ 
            $(this).removeClass("toggle");
            $(this).addClass("add_active"); 
        }else{ 
            $(this).removeClass("add_active"); 
            $(this).addClass("toggle"); 
        } 
        $("#custkeys").slideToggle("fast"); 
        return false;
        
        }
        
        /*
            $("#custkeys").hide(); 
                $("#custkeys").click(function(){    
                if($(this).attr("class") == "toggle"){
                    $(this).removeClass("toggle");
                    $(this).addClass("add_active");
                }else{
                    $(this).removeClass("add_active");
                    $(this).addClass("toggle");
                }
                $("#custkeys").slideToggle("fast");
                return false;
            });
            */
        
        
		
			function fscrollleft(){
				//while(true){
					function pageScroll() {
						document.getElementById('input').scrollLeft=1;
						scrolldelay = setTimeout(pageScroll,10);
					}
				
				//}
				alertify.error(document.getElementById('input').scrollleft);
			}
			
            function inputStrandConv(type){
                if(type=='mRNA'){
                    document.getElementById('input').value=document.getElementById('input').value.replace(/T|t,/gi, 'U');
                    document.getElementById('custkeyTU').innerHTML='U';
                }else{
                    document.getElementById('input').value=document.getElementById('input').value.replace(/U|u,/gi, 'T');
                    document.getElementById('custkeyTU').innerHTML='T';
                }
            }
            function caps(id){
                document.getElementById(id).value = document.getElementById(id).value.toUpperCase();
            }
            function acceptChar(key){
                if (key == 13) { 
                    document.getElementById('convert').click(); 
                    return false; 
                }
                if(key == 46){return true;}
                if(key == 8){return true;}
                if(key == 40){return true;}
                if(key == 37){return true;}
                if(key == 39){return true;}
                if(key == 38){return true;}
                if(key !== 65){
                    if(key !== 67){
                        if(key !== 71){
                            if(NAsel(key)==false){
                                return false;
                            }
                        }
                    }
                }
                
                function NAsel(key){
                    var strandType = getRadioVal(document.getElementById('strand'),'StrandType');
                    if(strandType == 'DNA'){
                        if(key == 84){return true;}
                    }else if(strandType == 'mRNA'){
                        if(key == 85){return true;}
                    }
                    return false;
                }
            }
            
            function nac(){
			loadingscreen('show');
                var strandType = getRadioVal(document.getElementById('strand'),'StrandType');
                var info = converter(document.getElementById('input').value,strandType);
                if(info['error']=='true'){
                    alertify.error(info['message']).dismissOthers();
                }else{
                    document.getElementById('outputDNA').value=info['DNA'];
                    document.getElementById('outputmRNA').value=info['mRNA'];
                    document.getElementById('outputProtein').value=info['Prot'];
                }
			var hide=setTimeout(function(){loadingscreen('hide')},1000);
            }
            
            function clearall(){
                document.getElementById('outputDNA').value='';
                document.getElementById('outputmRNA').value='';
                document.getElementById('outputProtein').value='';
                document.getElementById('input').value='';
                alertify.dismissAll();
            }
            
            
            function getRadioVal(form, name) {
                var val;
                // get list of radio buttons with specified name
                var radios = form.elements[name];
                
                // loop through list of radio buttons
                for (var i=0, len=radios.length; i<len; i++) {
                    if ( radios[i].checked ) { // radio checked?
                        val = radios[i].value; // if so, hold its value in val
                        break; // and break out of for loop
                    }
                }
                return val; // return value of checked radio or undefined if none checked
            }
			this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
            app.initialize();
			
			
            
            
        </script>
  </body>
</html>
